
# Cloud Database Setup Guide

This project supports **Supabase** for real-time cloud synchronization.
Follow these steps to enable cloud features.

## 1. Create a Supabase Project
1. Go to [https://supabase.com/](https://supabase.com/) and sign up/login.
2. Click **"New Project"**.
3. Enter your project details (Name: `personal-website`, Database Password, Region).
4. Wait for the project to be created.

## 2. Get API Keys
1. In your Supabase project dashboard, go to **Settings** (Icon at the bottom of the left sidebar) -> **API**.
2. Find the **Project URL** and **anon public** key.
3. You will need to add these to your Vercel Environment Variables.

## 3. Create Database Tables
Go to the **SQL Editor** (Icon in the left sidebar) and run the following script to create all necessary tables:

```sql
-- 1. Music Table
create table public.music (
  id bigint generated by default as identity primary key,
  title text not null,
  link text,
  cover text,
  created_at timestamp with time zone default timezone('utc'::text, now()) not null
);

-- 2. Tech Articles Table
create table public.tech_articles (
  id bigint generated by default as identity primary key,
  title text not null,
  summary text,
  content text,
  tags text[], 
  date text,
  "iconName" text,
  created_at timestamp with time zone default timezone('utc'::text, now()) not null
);

-- 3. Ideas Table
create table public.ideas (
  id bigint generated by default as identity primary key,
  title text not null,
  description text,
  content text,
  "references" text,
  stage text,
  tags text[],
  date text,
  priority text,
  created_at timestamp with time zone default timezone('utc'::text, now()) not null
);

-- 4. Trips Table
create table public.trips (
  id bigint generated by default as identity primary key,
  location text,
  title text,
  date text,
  "imageColor" text,
  description text,
  content text,
  height text,
  coordinates jsonb,
  "imageUrl" text,
  created_at timestamp with time zone default timezone('utc'::text, now()) not null
);

-- 5. Sports Records Table
create table public.sports_records (
  id bigint generated by default as identity primary key,
  date text,
  type text,
  name text,
  distance text,
  time text,
  pace text,
  notes text,
  created_at timestamp with time zone default timezone('utc'::text, now()) not null
);

-- Enable Row Level Security (RLS) for all tables
alter table public.music enable row level security;
alter table public.tech_articles enable row level security;
alter table public.ideas enable row level security;
alter table public.trips enable row level security;
alter table public.sports_records enable row level security;

-- Create Policies (Allow public read/write for personal website simplicity)
-- Note: In a production app with multiple users, you would restrict Insert/Update/Delete to authenticated users.

-- Music Policies
create policy "Enable read access for all users" on public.music for select using (true);
create policy "Enable insert for all users" on public.music for insert with check (true);
create policy "Enable update for all users" on public.music for update using (true);
create policy "Enable delete for all users" on public.music for delete using (true);

-- Tech Articles Policies
create policy "Enable read access for all users" on public.tech_articles for select using (true);
create policy "Enable insert for all users" on public.tech_articles for insert with check (true);
create policy "Enable update for all users" on public.tech_articles for update using (true);
create policy "Enable delete for all users" on public.tech_articles for delete using (true);

-- Ideas Policies
create policy "Enable read access for all users" on public.ideas for select using (true);
create policy "Enable insert for all users" on public.ideas for insert with check (true);
create policy "Enable update for all users" on public.ideas for update using (true);
create policy "Enable delete for all users" on public.ideas for delete using (true);

-- Trips Policies
create policy "Enable read access for all users" on public.trips for select using (true);
create policy "Enable insert for all users" on public.trips for insert with check (true);
create policy "Enable update for all users" on public.trips for update using (true);
create policy "Enable delete for all users" on public.trips for delete using (true);

-- Sports Records Policies
create policy "Enable read access for all users" on public.sports_records for select using (true);
create policy "Enable insert for all users" on public.sports_records for insert with check (true);
create policy "Enable update for all users" on public.sports_records for update using (true);
create policy "Enable delete for all users" on public.sports_records for delete using (true);

-- 6. Books Table
create table public.books (
  id bigint generated by default as identity primary key,
  title text not null,
  author text,
  rating numeric,
  status text,
  progress numeric,
  date text,
  quote text,
  review text,
  notes jsonb,
  created_at timestamp with time zone default timezone('utc'::text, now()) not null
);

-- 7. Resources Table
create table public.resources (
  id bigint generated by default as identity primary key,
  title text not null,
  type text,
  category text,
  description text,
  link text,
  content text,
  created_at timestamp with time zone default timezone('utc'::text, now()) not null
);

-- Enable Row Level Security (RLS) for new tables
alter table public.books enable row level security;
alter table public.resources enable row level security;

-- Books Policies
create policy "Enable read access for all users" on public.books for select using (true);
create policy "Enable insert for all users" on public.books for insert with check (true);
create policy "Enable update for all users" on public.books for update using (true);
create policy "Enable delete for all users" on public.books for delete using (true);

-- Resources Policies
create policy "Enable read access for all users" on public.resources for select using (true);
create policy "Enable insert for all users" on public.resources for insert with check (true);
create policy "Enable update for all users" on public.resources for update using (true);
create policy "Enable delete for all users" on public.resources for delete using (true);
```

## 4. Connect to Vercel
1. Go to your project on Vercel.
2. Go to **Settings** -> **Environment Variables**.
3. Add the following variables:
   - `VITE_SUPABASE_URL`: (Your Project URL)
   - `VITE_SUPABASE_ANON_KEY`: (Your Anon Public Key)
4. Redeploy your project.

## 5. Done!
Your website will now automatically detect the keys and switch to Cloud Mode.
